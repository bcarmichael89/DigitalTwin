System.register(["jimu-core","jimu-arcgis","jimu-ui"],(function(e,i){var t={},o={},s={};return{setters:[function(e){t.React=e.React,t.jsx=e.jsx},function(e){o.JimuMapViewComponent=e.JimuMapViewComponent},function(e){s.Button=e.Button,s.ButtonGroup=e.ButtonGroup,s.Loading=e.Loading}],execute:function(){e((()=>{var e={504:(e,i,t)=>{"use strict";t.d(i,{A:()=>n});var o=t(601),s=t.n(o),l=t(314),a=t.n(l)()(s());a.push([e.id,".simple-layer-toggle-widget{width:100%;height:100%;padding:12px;display:flex;flex-direction:column;align-items:center;overflow:hidden}.toggle-buttons{display:flex;justify-content:center;width:100%;margin:10px 0;margin-left:11px}.debug-buttons{margin-top:10px}.debug-button{width:100%;font-size:12px}.mt-1{margin-top:8px}.mt-2{margin-top:12px}.status-info{margin-top:10px;font-size:12px;border-top:1px solid #eee;padding-top:8px}.status-header{font-weight:bold;margin-bottom:5px}.status-item{display:flex;justify-content:space-between;margin-bottom:3px}.layer-name{font-weight:500}.layer-status{font-weight:bold}.visible{color:#00ad45}.hidden{color:#d13438}.loading-indicator{position:absolute;top:0;left:0;right:0;bottom:0;display:flex;align-items:center;justify-content:center;background-color:rgba(255,255,255,.7);z-index:10}.active-button{font-weight:bold}",""]);const n=a},314:e=>{"use strict";e.exports=function(e){var i=[];return i.toString=function(){return this.map((function(i){var t="",o=void 0!==i[5];return i[4]&&(t+="@supports (".concat(i[4],") {")),i[2]&&(t+="@media ".concat(i[2]," {")),o&&(t+="@layer".concat(i[5].length>0?" ".concat(i[5]):""," {")),t+=e(i),o&&(t+="}"),i[2]&&(t+="}"),i[4]&&(t+="}"),t})).join("")},i.i=function(e,t,o,s,l){"string"==typeof e&&(e=[[null,e,void 0]]);var a={};if(o)for(var n=0;n<this.length;n++){var r=this[n][0];null!=r&&(a[r]=!0)}for(var d=0;d<e.length;d++){var u=[].concat(e[d]);o&&a[u[0]]||(void 0!==l&&(void 0===u[5]||(u[1]="@layer".concat(u[5].length>0?" ".concat(u[5]):""," {").concat(u[1],"}")),u[5]=l),t&&(u[2]?(u[1]="@media ".concat(u[2]," {").concat(u[1],"}"),u[2]=t):u[2]=t),s&&(u[4]?(u[1]="@supports (".concat(u[4],") {").concat(u[1],"}"),u[4]=s):u[4]="".concat(s)),i.push(u))}},i}},601:e=>{"use strict";e.exports=function(e){return e[1]}},72:e=>{"use strict";var i=[];function t(e){for(var t=-1,o=0;o<i.length;o++)if(i[o].identifier===e){t=o;break}return t}function o(e,o){for(var l={},a=[],n=0;n<e.length;n++){var r=e[n],d=o.base?r[0]+o.base:r[0],u=l[d]||0,c="".concat(d," ").concat(u);l[d]=u+1;var v=t(c),h={css:r[1],media:r[2],sourceMap:r[3],supports:r[4],layer:r[5]};if(-1!==v)i[v].references++,i[v].updater(h);else{var b=s(h,o);o.byIndex=n,i.splice(n,0,{identifier:c,updater:b,references:1})}a.push(c)}return a}function s(e,i){var t=i.domAPI(i);t.update(e);return function(i){if(i){if(i.css===e.css&&i.media===e.media&&i.sourceMap===e.sourceMap&&i.supports===e.supports&&i.layer===e.layer)return;t.update(e=i)}else t.remove()}}e.exports=function(e,s){var l=o(e=e||[],s=s||{});return function(e){e=e||[];for(var a=0;a<l.length;a++){var n=t(l[a]);i[n].references--}for(var r=o(e,s),d=0;d<l.length;d++){var u=t(l[d]);0===i[u].references&&(i[u].updater(),i.splice(u,1))}l=r}}},659:e=>{"use strict";var i={};e.exports=function(e,t){var o=function(e){if(void 0===i[e]){var t=document.querySelector(e);if(window.HTMLIFrameElement&&t instanceof window.HTMLIFrameElement)try{t=t.contentDocument.head}catch(e){t=null}i[e]=t}return i[e]}(e);if(!o)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");o.appendChild(t)}},540:e=>{"use strict";e.exports=function(e){var i=document.createElement("style");return e.setAttributes(i,e.attributes),e.insert(i,e.options),i}},56:(e,i,t)=>{"use strict";e.exports=function(e){var i=t.nc;i&&e.setAttribute("nonce",i)}},825:e=>{"use strict";e.exports=function(e){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var i=e.insertStyleElement(e);return{update:function(t){!function(e,i,t){var o="";t.supports&&(o+="@supports (".concat(t.supports,") {")),t.media&&(o+="@media ".concat(t.media," {"));var s=void 0!==t.layer;s&&(o+="@layer".concat(t.layer.length>0?" ".concat(t.layer):""," {")),o+=t.css,s&&(o+="}"),t.media&&(o+="}"),t.supports&&(o+="}");var l=t.sourceMap;l&&"undefined"!=typeof btoa&&(o+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(l))))," */")),i.styleTagTransform(o,e,i.options)}(i,e,t)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(i)}}}},113:e=>{"use strict";e.exports=function(e,i){if(i.styleSheet)i.styleSheet.cssText=e;else{for(;i.firstChild;)i.removeChild(i.firstChild);i.appendChild(document.createTextNode(e))}}},686:e=>{"use strict";e.exports=o},244:e=>{"use strict";e.exports=t},321:e=>{"use strict";e.exports=s}},i={};function l(t){var o=i[t];if(void 0!==o)return o.exports;var s=i[t]={id:t,exports:{}};return e[t](s,s.exports,l),s.exports}l.n=e=>{var i=e&&e.__esModule?()=>e.default:()=>e;return l.d(i,{a:i}),i},l.d=(e,i)=>{for(var t in i)l.o(i,t)&&!l.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:i[t]})},l.o=(e,i)=>Object.prototype.hasOwnProperty.call(e,i),l.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.p="",l.nc=void 0;var a={};return l.p=window.jimuConfig.baseUrl,(()=>{"use strict";l.r(a),l.d(a,{__set_webpack_public_path__:()=>m,default:()=>y});var e=l(244),i=l(686),t=l(321),o=l(72),s=l.n(o),n=l(825),r=l.n(n),d=l(659),u=l.n(d),c=l(56),v=l.n(c),h=l(540),b=l.n(h),g=l(113),f=l.n(g),p=l(504),w={};w.styleTagTransform=f(),w.setAttributes=v(),w.insert=u().bind(null,"head"),w.domAPI=r(),w.insertStyleElement=b();s()(p.A,w);p.A&&p.A.locals&&p.A.locals;class y extends e.React.PureComponent{constructor(e){super(e),this.mapWidgetId="widget_1",this.controllers=[{id:"widget_26",uvicWidgetId:"widget_27",jbWidgetId:"widget_28",ghWidgetId:"widget_29",oldWidgetId:"widget_30",type:"Text"},{id:"widget_14",uvicWidgetId:"widget_15",jbWidgetId:"widget_16",ghWidgetId:"widget_17",oldWidgetId:"widget_18",type:"Chart"},{id:"widget_21",uvicWidgetId:"widget_22",jbWidgetId:"widget_23",ghWidgetId:"widget_24",oldWidgetId:"widget_25",type:"BusText"}],this.layerNames={uvicMain:"Accessibility Index Current",uvicBus:"UVIC Bus Routes Existing",uvicBusStops:"Existing Bus Stops",jbMain:"Accessibility Index JB Route",jbBus:"Additional JB Route and Existing",jbStops:"Bus Stops with JB",ghMain:"Accessibility Index GH Route",ghBus:"Additional GH Route and Existing",ghStops:"Bus Stops with GH",oldMain:"Accessibility Index Additional Routes",oldBus:"All Additional and Existing Routes",oldBusStops:"All Existing and Additional Bus Stops"},this.busDataSources={uvicBusStops:"195c9745f78-layer-5",oldBusStops:"195ced9e25e-layer-6"},this.onViewChange=e=>{this.setState({jimuMapView:e}),console.log("Map view loaded"),e&&this.initializeLayers(e)},this.initializeLayers=e=>{e&&e.view?(this.setState({loading:!0}),e.view.when((()=>{const i=e.view.map.allLayers.toArray();console.log("All available layers:",i.map((e=>({id:e.id,title:e.title}))));const t=i.find((e=>e.title.toLowerCase()===this.layerNames.uvicMain.toLowerCase())),o=i.find((e=>e.title.toLowerCase()===this.layerNames.uvicBus.toLowerCase())),s=i.find((e=>e.title.toLowerCase()===this.layerNames.uvicBusStops.toLowerCase())),l=i.find((e=>e.title.toLowerCase()===this.layerNames.jbMain.toLowerCase())),a=i.find((e=>e.title.toLowerCase()===this.layerNames.jbBus.toLowerCase())),n=i.find((e=>e.title.toLowerCase()===this.layerNames.jbStops.toLowerCase())),r=i.find((e=>e.title.toLowerCase()===this.layerNames.ghMain.toLowerCase())),d=i.find((e=>e.title.toLowerCase()===this.layerNames.ghBus.toLowerCase())),u=i.find((e=>e.title.toLowerCase()===this.layerNames.ghStops.toLowerCase())),c=i.find((e=>e.title.toLowerCase()===this.layerNames.oldMain.toLowerCase())),v=i.find((e=>e.title.toLowerCase()===this.layerNames.oldBus.toLowerCase()));console.log("Layer search results:",{uvicMain:t?"Found":"Not found",uvicBus:o?"Found":"Not found",jbMain:l?"Found":"Not found",jbBus:a?"Found":"Not found",jbStops:n?"Found":"Not found",oldMain:c?"Found":"Not found",oldBus:v?"Found":"Not found"}),t&&(t.visible=!0),o&&(o.visible=!0),s&&(s.visible=!0),l&&(l.visible=!1),a&&(a.visible=!1),n&&(n.visible=!1),r&&(r.visible=!1),d&&(d.visible=!1),u&&(u.visible=!1),c&&(c.visible=!1),v&&(v.visible=!1),this.setState({loading:!1,layerStatus:{uvicMain:{found:!!t,visible:t?t.visible:void 0},uvicBus:{found:!!o,visible:o?o.visible:void 0},jbMain:{found:!!l,visible:l?l.visible:void 0},jbBus:{found:!!a,visible:a?a.visible:void 0},jbStops:{found:!!n,visible:n?n.visible:void 0},ghMain:{found:!!r,visible:r?r.visible:void 0},ghBus:{found:!!d,visible:d?d.visible:void 0},ghStops:{found:!!u,visible:u?u.visible:void 0},oldMain:{found:!!c,visible:c?c.visible:void 0},oldBus:{found:!!v,visible:v?v.visible:void 0}}}),this.updateAllControllers("uvic"),console.log("Layers initialized")}))):console.error("No valid map view")},this.updateAllControllers=e=>{try{console.log(`Updating all controllers for ${e} layers`),this.controllers.forEach(((i,t)=>{setTimeout((()=>{this.updateSingleController(i,e)}),300*(t+1))})),this.setState({controllerUpdated:!0})}catch(e){console.error("Error updating controllers:",e),this.setState({controllerUpdated:!1})}},this.updateSingleController=(e,i)=>{try{let t;t="uvic"===i?e.uvicWidgetId:"jb"===i?e.jbWidgetId:"gh"===i?e.ghWidgetId:e.oldWidgetId,console.log(`Updating controller ${e.id} to show widget: ${t}`),setTimeout((()=>{this.clickControllerButton(e.id,t,e.type)}),300)}catch(i){console.error(`Error updating controller ${e.id}:`,i)}},this.clickControllerButton=(e,i,t="Text")=>{try{const o=document.querySelector(`div[data-widgetid="${e}"]`);if(!o)return void console.log(`Controller widget ${e} not found`);if(o.querySelector(`.avatar-card[data-widgetid="${i}"].active`)||o.querySelector(`button[data-widgetid="${i}"].active`))return void console.log(`Widget ${i} is already active in controller ${e}, no action needed`);console.log(`Looking for button to activate widget ${i} in controller ${e}`);const s=o.querySelectorAll(".avatar-card");let l=null;for(let e=0;e<s.length;e++){if(s[e].getAttribute("data-widgetid")===i){l=s[e];break}if(s[e].querySelector(`button[data-widgetid="${i}"]`)){l=s[e];break}}if(l){const t=l.querySelector("button.avatar-button");if(t)return console.log(`Found avatar button for ${i} in controller ${e}, clicking it`),void t.click()}const a=o.querySelector(`button[data-widgetid="${i}"]`);if(a)return console.log(`Found button with widget ID ${i} in controller ${e}, clicking it`),void a.click();let n="";if("Text"===t?n=i.includes("27")?"Existing Bus Stops":i.includes("28")?"Bus Stops With JB Route":i.includes("29")?"Bus Stops With GH Route":"Bus Stops With 2 Additional Routes":"Chart"===t?n=i.includes("15")?"Chart of Existing Index":i.includes("16")?"Chart of Index With JB Route":i.includes("17")?"Chart of Index With GH Route":"Chart of Index With 2 New Routes":"BusText"===t&&(n=i.includes("22")?"Existing Bus Route Count":i.includes("23")?"Bus Route Count With JB Route":i.includes("24")?"Bus Route Count With GH Route":"Bus Route Count With 2 New Routes"),n){const i=Array.from(o.querySelectorAll("button[aria-label]")).filter((e=>e.getAttribute("aria-label")===n));i.length>0&&(console.log(`Found button with label ${n} in controller ${e}, clicking it`),i[0].click())}}catch(i){console.error(`Error clicking controller ${e} button:`,i)}},this.showUvicLayers=()=>{this.setState({loading:!0});const{jimuMapView:e}=this.state;e&&e.view?e.view.when((()=>{console.log("Switching to UVIC layers");const i=e.view.map.allLayers.toArray(),t=i.find((e=>e.title.toLowerCase()===this.layerNames.uvicMain.toLowerCase())),o=i.find((e=>e.title.toLowerCase()===this.layerNames.uvicBus.toLowerCase())),s=i.find((e=>e.title.toLowerCase()===this.layerNames.uvicBusStops.toLowerCase())),l=i.find((e=>e.title.toLowerCase()===this.layerNames.oldBusStops.toLowerCase())),a=i.find((e=>e.title.toLowerCase()===this.layerNames.jbMain.toLowerCase())),n=i.find((e=>e.title.toLowerCase()===this.layerNames.jbBus.toLowerCase())),r=i.find((e=>e.title.toLowerCase()===this.layerNames.jbStops.toLowerCase())),d=i.find((e=>e.title.toLowerCase()===this.layerNames.ghMain.toLowerCase())),u=i.find((e=>e.title.toLowerCase()===this.layerNames.ghBus.toLowerCase())),c=i.find((e=>e.title.toLowerCase()===this.layerNames.ghStops.toLowerCase())),v=i.find((e=>e.title.toLowerCase()===this.layerNames.oldMain.toLowerCase())),h=i.find((e=>e.title.toLowerCase()===this.layerNames.oldBus.toLowerCase()));t&&(t.visible=!0,console.log(`Turned ON ${this.layerNames.uvicMain}`)),o&&(o.visible=!0,console.log(`Turned ON ${this.layerNames.uvicBus}`)),s&&(s.visible=!0,console.log(`Turned OFF ${this.layerNames.uvicBusStops}`)),a&&(a.visible=!1,console.log(`Turned OFF ${this.layerNames.jbMain}`)),n&&(n.visible=!1,console.log(`Turned OFF ${this.layerNames.jbBus}`)),r&&(r.visible=!1,console.log(`Turned OFF ${this.layerNames.jbStops}`)),d&&(d.visible=!1,console.log(`Turned OFF ${this.layerNames.ghMain}`)),u&&(u.visible=!1,console.log(`Turned OFF ${this.layerNames.ghBus}`)),c&&(c.visible=!1,console.log(`Turned OFF ${this.layerNames.ghStops}`)),v&&(v.visible=!1,console.log(`Turned OFF ${this.layerNames.oldMain}`)),h&&(h.visible=!1,console.log(`Turned OFF ${this.layerNames.oldBus}`)),l&&(l.visible=!1,console.log(`Turned OFF ${this.layerNames.oldBusStops}`)),this.setState({activeSet:"uvic",loading:!1,layerStatus:{uvicMain:{found:!!t,visible:t?t.visible:void 0},uvicBus:{found:!!o,visible:o?o.visible:void 0},jbMain:{found:!!a,visible:a?a.visible:void 0},jbBus:{found:!!n,visible:n?n.visible:void 0},jbStops:{found:!!r,visible:r?r.visible:void 0},ghMain:{found:!!d,visible:d?d.visible:void 0},ghBus:{found:!!u,visible:u?u.visible:void 0},ghStops:{found:!!c,visible:c?c.visible:void 0},oldMain:{found:!!v,visible:v?v.visible:void 0},oldBus:{found:!!h,visible:h?h.visible:void 0}}}),this.updateAllControllers("uvic")})):this.setState({loading:!1})},this.showJamesBayRoute=()=>{this.setState({loading:!0});const{jimuMapView:e}=this.state;e&&e.view?e.view.when((()=>{console.log("Switching to James Bay Route");const i=e.view.map.allLayers.toArray(),t=i.find((e=>e.title.toLowerCase()===this.layerNames.uvicMain.toLowerCase())),o=i.find((e=>e.title.toLowerCase()===this.layerNames.uvicBus.toLowerCase())),s=i.find((e=>e.title.toLowerCase()===this.layerNames.uvicBusStops.toLowerCase())),l=i.find((e=>e.title.toLowerCase()===this.layerNames.oldBusStops.toLowerCase())),a=i.find((e=>e.title.toLowerCase()===this.layerNames.jbMain.toLowerCase())),n=i.find((e=>e.title.toLowerCase()===this.layerNames.jbBus.toLowerCase())),r=i.find((e=>e.title.toLowerCase()===this.layerNames.jbStops.toLowerCase())),d=i.find((e=>e.title.toLowerCase()===this.layerNames.ghMain.toLowerCase())),u=i.find((e=>e.title.toLowerCase()===this.layerNames.ghBus.toLowerCase())),c=i.find((e=>e.title.toLowerCase()===this.layerNames.ghStops.toLowerCase())),v=i.find((e=>e.title.toLowerCase()===this.layerNames.oldMain.toLowerCase())),h=i.find((e=>e.title.toLowerCase()===this.layerNames.oldBus.toLowerCase()));t&&(t.visible=!1,console.log(`Turned OFF ${this.layerNames.uvicMain}`)),o&&(o.visible=!1,console.log(`Turned OFF ${this.layerNames.uvicBus}`)),s&&(s.visible=!1,console.log(`Turned OFF ${this.layerNames.uvicBusStops}`)),l&&(l.visible=!1,console.log(`Turned OFF ${this.layerNames.oldBusStops}`)),a&&(a.visible=!0,console.log(`Turned ON ${this.layerNames.jbMain}`)),n&&(n.visible=!0,console.log(`Turned ON ${this.layerNames.jbBus}`)),r&&(r.visible=!0,console.log(`Turned ON ${this.layerNames.jbStops}`)),d&&(d.visible=!1,console.log(`Turned OFF ${this.layerNames.ghMain}`)),u&&(u.visible=!1,console.log(`Turned OFF ${this.layerNames.ghBus}`)),c&&(c.visible=!1,console.log(`Turned OFF ${this.layerNames.ghStops}`)),v&&(v.visible=!1,console.log(`Turned OFF ${this.layerNames.oldMain}`)),h&&(h.visible=!1,console.log(`Turned OFF ${this.layerNames.oldBus}`)),this.setState({activeSet:"jb",loading:!1,layerStatus:{uvicMain:{found:!!t,visible:t?t.visible:void 0},uvicBus:{found:!!o,visible:o?o.visible:void 0},uvicBusStops:{found:!!s,visible:s?s.visible:void 0},jbMain:{found:!!a,visible:a?a.visible:void 0},jbBus:{found:!!n,visible:n?n.visible:void 0},jbStops:{found:!!r,visible:r?r.visible:void 0},ghMain:{found:!!d,visible:d?d.visible:void 0},ghBus:{found:!!u,visible:u?u.visible:void 0},ghStops:{found:!!c,visible:c?c.visible:void 0},oldMain:{found:!!v,visible:v?v.visible:void 0},oldBus:{found:!!h,visible:h?h.visible:void 0}}}),this.updateAllControllers("jb")})):this.setState({loading:!1})},this.showGordonHeadRoute=()=>{this.setState({loading:!0});const{jimuMapView:e}=this.state;e&&e.view?e.view.when((()=>{console.log("Switching to Gordon Head Route");const i=e.view.map.allLayers.toArray(),t=i.find((e=>e.title.toLowerCase()===this.layerNames.uvicMain.toLowerCase())),o=i.find((e=>e.title.toLowerCase()===this.layerNames.uvicBus.toLowerCase())),s=i.find((e=>e.title.toLowerCase()===this.layerNames.uvicBusStops.toLowerCase())),l=i.find((e=>e.title.toLowerCase()===this.layerNames.oldBusStops.toLowerCase())),a=i.find((e=>e.title.toLowerCase()===this.layerNames.jbMain.toLowerCase())),n=i.find((e=>e.title.toLowerCase()===this.layerNames.jbBus.toLowerCase())),r=i.find((e=>e.title.toLowerCase()===this.layerNames.jbStops.toLowerCase())),d=i.find((e=>e.title.toLowerCase()===this.layerNames.ghMain.toLowerCase())),u=i.find((e=>e.title.toLowerCase()===this.layerNames.ghBus.toLowerCase())),c=i.find((e=>e.title.toLowerCase()===this.layerNames.ghStops.toLowerCase())),v=i.find((e=>e.title.toLowerCase()===this.layerNames.oldMain.toLowerCase())),h=i.find((e=>e.title.toLowerCase()===this.layerNames.oldBus.toLowerCase()));t&&(t.visible=!1,console.log(`Turned OFF ${this.layerNames.uvicMain}`)),o&&(o.visible=!1,console.log(`Turned OFF ${this.layerNames.uvicBus}`)),s&&(s.visible=!1,console.log(`Turned OFF ${this.layerNames.uvicBusStops}`)),l&&(l.visible=!1,console.log(`Turned OFF ${this.layerNames.oldBusStops}`)),a&&(a.visible=!1,console.log(`Turned OFF ${this.layerNames.jbMain}`)),n&&(n.visible=!1,console.log(`Turned OFF ${this.layerNames.jbBus}`)),r&&(r.visible=!1,console.log(`Turned OFF ${this.layerNames.jbStops}`)),d&&(d.visible=!0,console.log(`Turned ON ${this.layerNames.ghMain}`)),u&&(u.visible=!0,console.log(`Turned ON ${this.layerNames.ghBus}`)),c&&(c.visible=!0,console.log(`Turned ON ${this.layerNames.ghStops}`)),v&&(v.visible=!1,console.log(`Turned OFF ${this.layerNames.oldMain}`)),h&&(h.visible=!1,console.log(`Turned OFF ${this.layerNames.oldBus}`)),this.setState({activeSet:"gh",loading:!1,layerStatus:{uvicMain:{found:!!t,visible:t?t.visible:void 0},uvicBus:{found:!!o,visible:o?o.visible:void 0},uvicBusStops:{found:!!s,visible:s?s.visible:void 0},jbMain:{found:!!a,visible:a?a.visible:void 0},jbBus:{found:!!n,visible:n?n.visible:void 0},jbStops:{found:!!r,visible:r?r.visible:void 0},ghMain:{found:!!d,visible:d?d.visible:void 0},ghBus:{found:!!u,visible:u?u.visible:void 0},ghStops:{found:!!c,visible:c?c.visible:void 0},oldMain:{found:!!v,visible:v?v.visible:void 0},oldBus:{found:!!h,visible:h?h.visible:void 0}}}),this.updateAllControllers("gh")})):this.setState({loading:!1})},this.showOldLayers=()=>{this.setState({loading:!0});const{jimuMapView:e}=this.state;e&&e.view?e.view.when((()=>{console.log("Switching to OLD layers");const i=e.view.map.allLayers.toArray(),t=i.find((e=>e.title.toLowerCase()===this.layerNames.uvicMain.toLowerCase())),o=i.find((e=>e.title.toLowerCase()===this.layerNames.uvicBus.toLowerCase())),s=i.find((e=>e.title.toLowerCase()===this.layerNames.uvicBusStops.toLowerCase())),l=i.find((e=>e.title.toLowerCase()===this.layerNames.jbMain.toLowerCase())),a=i.find((e=>e.title.toLowerCase()===this.layerNames.jbBus.toLowerCase())),n=i.find((e=>e.title.toLowerCase()===this.layerNames.jbStops.toLowerCase())),r=i.find((e=>e.title.toLowerCase()===this.layerNames.ghMain.toLowerCase())),d=i.find((e=>e.title.toLowerCase()===this.layerNames.ghBus.toLowerCase())),u=i.find((e=>e.title.toLowerCase()===this.layerNames.ghStops.toLowerCase())),c=i.find((e=>e.title.toLowerCase()===this.layerNames.oldMain.toLowerCase())),v=i.find((e=>e.title.toLowerCase()===this.layerNames.oldBus.toLowerCase())),h=i.find((e=>e.title.toLowerCase()===this.layerNames.oldBusStops.toLowerCase()));t&&(t.visible=!1,console.log(`Turned OFF ${this.layerNames.uvicMain}`)),o&&(o.visible=!1,console.log(`Turned OFF ${this.layerNames.uvicBus}`)),s&&(s.visible=!1,console.log(`Turned OFF ${this.layerNames.uvicBusStops}`)),l&&(l.visible=!1,console.log(`Turned OFF ${this.layerNames.jbMain}`)),a&&(a.visible=!1,console.log(`Turned OFF ${this.layerNames.jbBus}`)),n&&(n.visible=!1,console.log(`Turned OFF ${this.layerNames.jbStops}`)),r&&(r.visible=!1,console.log(`Turned OFF ${this.layerNames.ghMain}`)),d&&(d.visible=!1,console.log(`Turned OFF ${this.layerNames.ghBus}`)),u&&(u.visible=!1,console.log(`Turned OFF ${this.layerNames.ghStops}`)),c&&(c.visible=!0,console.log(`Turned ON ${this.layerNames.oldMain}`)),v&&(v.visible=!0,console.log(`Turned ON ${this.layerNames.oldBus}`)),h&&(h.visible=!0,console.log(`Turned ON ${this.layerNames.oldBusStops}`)),this.setState({activeSet:"old",loading:!1,layerStatus:{uvicMain:{found:!!t,visible:t?t.visible:void 0},uvicBus:{found:!!o,visible:o?o.visible:void 0},jbMain:{found:!!l,visible:l?l.visible:void 0},jbBus:{found:!!a,visible:a?a.visible:void 0},jbStops:{found:!!n,visible:n?n.visible:void 0},ghMain:{found:!!r,visible:r?r.visible:void 0},ghBus:{found:!!d,visible:d?d.visible:void 0},ghStops:{found:!!u,visible:u?u.visible:void 0},oldMain:{found:!!c,visible:c?c.visible:void 0},oldBus:{found:!!v,visible:v?v.visible:void 0}}}),this.updateAllControllers("old")})):this.setState({loading:!1})},this.state={jimuMapView:null,activeSet:"uvic",loading:!1,layerStatus:{uvicMain:{found:!1},uvicBus:{found:!1},ghMain:{found:!1},ghBus:{found:!1},ghStops:{found:!1},jbMain:{found:!1},jbBus:{found:!1},jbStops:{found:!1},oldMain:{found:!1},oldBus:{found:!1}},controllerUpdated:!1},this.props.config&&(this.props.config.mapWidgetId&&(this.mapWidgetId=this.props.config.mapWidgetId),this.props.config.controllers&&(this.controllers=this.props.config.controllers))}render(){const{activeSet:o,loading:s}=this.state;return(0,e.jsx)("div",{className:"simple-layer-toggle-widget"},(0,e.jsx)(i.JimuMapViewComponent,{useMapWidgetId:this.mapWidgetId,onActiveViewChange:this.onViewChange}),s&&(0,e.jsx)("div",{className:"loading-indicator"},(0,e.jsx)(t.Loading,{type:"secondary"})),(0,e.jsx)(t.ButtonGroup,{className:"toggle-buttons"},(0,e.jsx)(t.Button,{onClick:this.showUvicLayers,type:"uvic"===o?"primary":"default",className:"uvic"===o?"active-button":"",disabled:s},"Existing Routes"),(0,e.jsx)(t.Button,{onClick:this.showJamesBayRoute,type:"jb"===o?"primary":"default",className:"jb"===o?"active-button":"",disabled:s},"New JB Route"),(0,e.jsx)(t.Button,{onClick:this.showGordonHeadRoute,type:"gh"===o?"primary":"default",className:"gh"===o?"active-button":"",disabled:s},"New GH Route"),(0,e.jsx)(t.Button,{onClick:this.showOldLayers,type:"old"===o?"primary":"default",className:"old"===o?"active-button":"",disabled:s},"Two New Routes")))}}function m(e){l.p=e}})(),a})())}}}));